version: '3'
services:
  portainer:
    image: portainerci/portainer:$PORTAINER_TAG
    container_name: e2e-portainer
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

  cypress:
    image: cypress/included:3.4.1
    container_name: e2e-cypress
    depends_on:
      - portainer
    working_dir: /app
    environment:
      - CYPRESS_baseUrl=http://e2e-portainer:9000
    volumes:
      - ./cypress:/app/cypress
      - ./cypress.json:/app/cypress.json